!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o(1);var r={},n={},i=0;function d(e){var t=new Set;for(var o in e){var r=e[o].taskProject;t.add(r)}var n=document.querySelector(".todo__filter-projects");n.options.length=0;var i=document.createElement("option");i.value="0",i.text="Все",n.add(i),t.forEach(function(e){var t=document.createElement("option");t.value=e,t.text=e,n.add(t)})}function a(e,t){var o=document.createElement("div");o.className="todo__item todo-item",o.setAttribute("data-id",t);var r=document.createElement("h4");r.className="todo-item__title",r.innerHTML=e[t].taskTitle;var n=document.createElement("div");n.className="row";var i=document.createElement("div");i.className="todo-item__project",i.innerHTML='<span class="todo-item__label">Проект:</span><span class="todo-item-element__content">'+e[t].taskProject+"</span>";var d=document.createElement("div");d.className="todo-item__priority",d.innerHTML='<span class="todo-item__label">Приоритет:</span><span class="todo-item-element__content">'+e[t].taskPriority+"</span>",n.appendChild(i),n.appendChild(d);var a=document.createElement("div");a.className="todo-item__text slide-up",a.innerHTML=e[t].taskText;var m=document.createElement("div");m.className="todo-item__control-panel row";var s=document.createElement("button");s.className="todo-item__edit",s.setAttribute("data-id",t),s.innerHTML="Изменить",s.onclick=c;var _=document.createElement("button");_.className="todo-item__remove",_.setAttribute("data-id",t),_.innerHTML="Закрыть",_.onclick=l;var f=document.createElement("button");f.className="todo-item__toggle",f.setAttribute("data-id",t),f.innerHTML="Развернуть",f.onclick=u,m.appendChild(s),m.appendChild(_),m.appendChild(f),o.appendChild(r),o.appendChild(n),o.appendChild(a),o.appendChild(m),document.querySelector(".todo__list").appendChild(o)}function c(){var e=this.getAttribute("data-id");document.querySelector(".todo__form_item_title").value=r[e].taskTitle,document.querySelector(".todo__form_item_project").value=r[e].taskProject,document.querySelector(".todo__form_item_priority").value=r[e].taskPriority,document.querySelector(".todo__form_item_text").value=r[e].taskText,document.querySelector(".todo__form_btn_submit").setAttribute("data-id",e),m()}function l(){var e=this.getAttribute("data-id");document.querySelector('.todo-item[data-id="'+e+'"]').remove(),delete r[e],localStorage.setItem("todolist",JSON.stringify(r))}function u(){var e=this.getAttribute("data-id"),t=document.querySelector('.todo-item[data-id="'+e+'"] .todo-item__toggle'),o=document.querySelector('.todo-item[data-id="'+e+'"] .todo-item__text');o.classList.contains("slide-down")?(t.innerHTML="Развернуть",o.style.maxHeight=0,o.classList.remove("slide-down")):(t.innerHTML="Cвернуть",o.style.maxHeight=o.scrollHeight+"px",o.classList.add("slide-down"))}function m(){document.querySelector(".todo__control-panel").classList.add("hidden"),document.querySelector(".todo__form").classList.remove("hidden")}function s(){document.querySelector(".todo__form").classList.add("hidden"),document.querySelector(".todo__control-panel").classList.remove("hidden")}function _(e){var t=void 0,o=void 0,r=void 0,n=void 0,i=void 0,d=void 0,a=void 0;for(t=document.querySelector(".todo__list"),r=!0;r;){for(r=!1,n=t.querySelectorAll(".todo-item"),o=0;o<n.length-1;o++)if("priority"==e?(i=n[o].querySelector(".todo-item__priority .todo-item-element__content").innerHTML,d=n[o+1].querySelector(".todo-item__priority .todo-item-element__content").innerHTML):(i=n[o].getAttribute("data-id"),d=n[o+1].getAttribute("data-id")),a=!1,i>d){a=!0;break}a&&(n[o].parentNode.insertBefore(n[o+1],n[o]),r=!0)}}function f(e,t){var o=t,r=document.querySelectorAll(".todo-item");if(0==o)[].forEach.call(r,function(e){e.classList.remove("hidden")});else for(var n in e){if(e[n].taskProject==o){var i=document.querySelectorAll('.todo-item[data-id="'+n+'"]');[].forEach.call(i,function(e){e.classList.remove("hidden")})}else{var d=document.querySelectorAll('.todo-item[data-id="'+n+'"]');[].forEach.call(d,function(e){e.classList.add("hidden")})}}}!function(){if(void 0!=localStorage.getItem("todolist")){for(var e in r=JSON.parse(localStorage.getItem("todolist")),i=Object.keys(r).length,r)a(r,e);d(r)}}(),document.querySelector("#demoTasks").addEventListener("click",function(){fetch("http://deco-creative.com.ua/demoTasks.json").then(function(e){return e.json()}).then(function(e){for(var t in document.querySelector(".todo__list").innerHTML="",e)a(e,t);d(e),n=e})}),document.querySelector(".todo__add").addEventListener("click",function(){m()}),document.querySelector("#todo__sort-priority").addEventListener("change",function(){this.checked?_("priority"):_("order")}),document.querySelector(".todo__filter-projects").addEventListener("change",function(){var e=this.value;0===Object.keys(n).length?f(r,e):f(n,e)}),document.querySelector(".todo__form_btn_submit").addEventListener("click",function(e){e.preventDefault(),1==function(){var e=document.querySelectorAll(".todo__form input[type=text]"),t=document.querySelector("textarea"),o=void 0;return[].forEach.call(e,function(e){""==e.value?(e.parentElement.classList.add("todo-form-input-wrapper_invalid"),o=!1):(e.parentElement.classList.remove("todo-form-input-wrapper_invalid"),o=!0)}),""!=t.value&&1==o?(t.parentElement.classList.remove("todo-form-input-wrapper_invalid"),o=!0):""!=t.value&&0==o?(t.parentElement.classList.remove("todo-form-input-wrapper_invalid"),o=!1):(t.parentElement.classList.add("todo-form-input-wrapper_invalid"),o=!1),o}()&&(!function(){var e=document.querySelector(".todo__form_btn_submit").getAttribute("data-id"),t=document.querySelector(".todo__form_item_title").value,o=document.querySelector(".todo__form_item_project").value,n=document.querySelector(".todo__form_item_priority").value,c=document.querySelector(".todo__form_item_text").value;if(void 0==e){i++;var l={};l.id=i,l.taskTitle=t,l.taskProject=o,l.taskPriority=n,l.taskText=c,r[i]=l,a(r,i),d(r)}else r[e].taskTitle=t,document.querySelector('.todo-item[data-id="'+e+'"] .todo-item__title').innerHTML=t,r[e].taskProject=o,console.log(o),document.querySelector('.todo-item[data-id="'+e+'"] .todo-item__project .todo-item-element__content').innerHTML=o,r[e].taskPriority=n,document.querySelector('.todo-item[data-id="'+e+'"] .todo-item__priority .todo-item-element__content').innerHTML=n,r[e].taskText=c,document.querySelector('.todo-item[data-id="'+e+'"] .todo-item__text').innerHTML=c;localStorage.setItem("todolist",JSON.stringify(r))}(),s(),document.querySelector(".todo__form").reset())}),document.querySelector(".todo__form_btn_cancel").addEventListener("click",function(e){e.preventDefault(),s()})},function(e,t,o){}]);
//# sourceMappingURL=bundle.js.map